## This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
## For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven
#
#name: Api test Automation
#
#on:
#  push:
#    branches: [ "j-allure" ]
#  pull_request:
#    branches: [ "j-allure" ]
#  schedule:
#    - cron: '*/10 * * * 0-5'
#
#jobs:
#  AoD-API-Automation-Tests:
#
#    runs-on: ubuntu-latest
#
#    steps:
#      - uses: actions/checkout@v3
#      - name: Set up JDK 11
#        uses: actions/setup-java@v3
#        with:
#          java-version: '11'
#          distribution: 'temurin'
#          cache: maven
#      - name: Run tests with Maven
#        run: mvn clean test
##      - name: Publish Test Results
##        uses: EnricoMi/publish-unit-test-result-action@v1
##        if: always()
##        with:
##          files: "test-results/**/*.xml"
#      - name: Create a temp artifact folder;
#        run: |
#          sudo apt update && sudo apt -y install allure
#      - name: Install allure
#        run: |
#          brew install allure
#        working-directory: .
#      - name: Collect Allure files and generate allure-report folder
#        run: |
#          allure generate ./allure-results --clean
#      - name: Publishing Allure artifact to GitHub Actions
#        uses: actions/upload-artifact@v2
#        with:
#          name: allure-report
#          path: ./allure-report
#
#      - uses: actions/checkout@v2
#
#      - name: Get Allure history
#        uses: actions/checkout@v2
#        if: always()
#        continue-on-error: true
#        with:
#          ref: gh-pages
#          path: gh-pages
#
#      - name: Allure Report action from marketplace
#        uses: simple-elf/allure-report-action@master
#        if: always()
##        id: allure-report
#        with:
#          allure_results: allure-results
##          gh_pages: gh-pages
#          allure_report: allure-report
#          allure_history: allure-history
#          keep_reports: 20
#
#      - name: Deploy report to Github Pages
#        if: always()
#        uses: peaceiris/actions-gh-pages@v2
#        env:
#          PERSONAL_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#          PUBLISH_BRANCH: gh-pages
#          PUBLISH_DIR: allure-history